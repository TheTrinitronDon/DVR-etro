# Pinetron PDR-XM3K | PDR-XM3004/PDR-XM3008
The PDR-XM3 is a standalone H.264 DVR unit available in 4-, 8-, and 16-channel models. (NOTE: While the PDR-XM3004 and PDR-XM3008 use the same motherboard, I cannot confirm if the 16-channel model will be compatable).

Also sold as:
True-H SSA-0412/SSA-0824, CCTV Star SSA-0412/SSA-0824, Nippon Security Systems NSD-3004/NSD-3008

# Research 
In Late-2024, I purchased a DVR branded as a "TRUE-H H.264 DVR" The bottom badge listed the  model number as "SSA-0412," with research showing SSA-0812 model number for 8-channel units. Inside, I found my first clue that this was a white-label job: a sticker with the code "XM3K-PINETRON-1" on the touch-panel circuit. Also, "XM3008-MAIN V1.1" is silkscreened onto the top side of the motherboard by the alarm I/O. On the underside, there's a silkscreen around reistors RE4, RE5, and RE6 that points to depictions of the proper configuration for 4-channel and 8-channel models. Unused footprints were clearly for a second NVP1114MX 4-ch Video Processing IC, supporting passive components, and BNC inputs. This is why I am comfortable in saying that Pinetron is the OEM for the white-labelled DVRs listed above, and that they use the same motherboard layout for both the 4-channel and 8-channel models.

# Chipset/Hardware:
-Nextchip NVS2200F - ARMv9-Core H.264 NDVR SoC
-Nextchip NVR1114XM - 4-ch Video CODEC w/ 4-ch Audio
-Macro Image Technology i-MARV MDIN220 - Digital Video HD Upconverter
-Samsung K4H60838J-LCCC - 256Mb J-Die SDRAM (32Mbitx8 / DDR400)  
-Spansion S29AL016J70TFI01 - 16-Megabit Flash Memory (3V-Only, Top Boot Sector, 70ns access time)
-Marvell Devices 88SA8052-TBC2 - SATA/PATA Bridge
-Integrated Device Technology IDT1338 - RTC w/ Non-Volatile Battery-Backed RAM
-Hynix HY27US08121B - 512 MBit (32Bx64) DDR SDRAM NAND Flash
-Davicom DM9161AEP - 10/100Mbps Fast Ethernet Tx/Fx Single-Chip Transceiver

While researching, I couldn't find a full whitepaper/datasheet for the NVS2200/NVS2200F SoC. However, I did come across a guide for what seems to be a Nextchip SDVR2204PN - a standalone 4-channel DVR that uses the NVS2200F ARM9 Codec SoC Processor and NVP1004MX 4-channel video Processor & Encoder/Decoder. This document really gave me hope that I could actually achieve my goal of playing DOOM, as it gives detailed instructions on accessing the bootloader, memory layout, firmware loading, cross-compiling, building an IDE, Serial terminal communication, reflashing via JTAG, downloading firmware updates... literally everything we need.

Kernel/Firmware Details:
Pinetron XM3 Firmware is available to download for free from from the Pinetron website (https://pinetron.ru/download/firmware/pdr-xm3000-firmware?tmpl=component). 

After extracting xm3k_all_oem01_11.08.09_v1.10.img, there's a binary file titled vmlinux.bin and xm3k_app.yaffs. I am unfamiliar with .yaffs filesystems, so I extracted vmlinux.bin. And, when extracted, there are two files inside: a CPIO Archive (application/x-CPIO) file titled 18A20, and a plaintext document titled 2495CC. Upon opening the latter in notepad, I found the complete make config file in plaintext. 

While I'm still new to Linux, I did find a lot of important/interesting details while scrolling through a few times (and doing a whole lot of googling lol):

Linux kernel version 2.6.14
#
#System Type
#
CONFIG_ARM=y
CONFIG_ARCH_GM=y
CONFIG_PLATFORM_GM8180=y
CONFIG_USE_FRAMEBUFFER=y
...
Okay, so this tells me that that this kernel is configured for use with ARM processors built on Grain Media Architecture--specifically, the Grain Media GM8180. This was surprising to me, as there are no Grain ICs on the PDR-XM3004/PDR-XM3008 board. I am curious if the Nextchip NVS2200 is a direct clone, or if it is only similar enough to use its configuration.

And, most importantly for gaming purposes, we have the frame buffer console enabled.
...
#
#GM Platform Options
#
CONFIG_PLATFORM_AHBDMA=y
#CONFIG_AHB_DMA_TEST is not set
CONFIG_PLATFORM_APBDMA=y
#CONFIG_PLATFORM_FIQ_RELAY is not set
CONFIG_SYS_CLK=165888000
CONFIG_UART_CLK=18432000
CONFIG_SDRAM_SIZE=0x8000000
CONFIG_MACH_GM=y
...
Details about interfacing our Grain GM8180

#
#Boot options
#
CONFIG_ZBOOT_ROM_TEXT=0x0
CONFIG_ZBOOT_ROM_BSS=0x0
CONFIG_CMDLINE="mem=128M console=uart,shift,2,io,0xF9820000,115200 initcall_debug user_debug=31 initrd=0x2000000,6160384 init=/init root=/dev/ram0 rw"
#CONFIG_XIP_KERNEL is not set
...
UART baud, i/o location, registers/adresses, root filepath. This is essential for interfacing a debug probe/arduino/programmer, and will be key to debugging.
...
#
#Generic Driver Options
#
#CONFIG_STANDALONE is not set
#CONFIG_PREVENT_FIRMWARE_BUILD is not set
#CONFIG_FW_LOADER is not set
#CONFIG_DEBUG_DRIVER is not set
...
I am not certain, but I am pretty sure that means our system will run custom firmware! This means it should (theoretically) trivial to make some careful edits to the configuration to facilitate some retro gaming goodness.
